"use strict";(self.webpackChunknotion_clone=self.webpackChunknotion_clone||[]).push([[315],{315:(t,e,i)=>{i.r(e),i.d(e,{todo:()=>s});var n=i(51);let o,a;const s=class{todoArray=[];TODO;DB;qry;userCollection;constructor(t,e){this.DB=o=t,this.userCollection=e,this.TODO=a=(0,n.hJ)(t,e),this.qry=(0,n.IO)(this.TODO,(0,n.Xo)("timeStamp","desc")),this.refresh()}refresh(){this.todoArray=[],(async()=>{(await(0,n.PL)(this.qry)).forEach((t=>{this.todoArray.push({...t.data(),id:t.id})})),this.displayTodo(),document.querySelectorAll(".delete").forEach((t=>{t.addEventListener("click",(t=>{t.preventDefault();let e=t.target.parentElement.parentElement.id;this.deleteTodo(e.toString())}))}))})()}addTodo(t,e){let i;i="todo"==e?{type:e,text:t,timeStamp:Date.now(),done:!1}:"note"==e?{type:e,text:t.split("\n").join("<br>"),timeStamp:Date.now()}:{type:e,text:t,timeStamp:Date.now()},(0,n.ET)(this.TODO,i).then((t=>{this.refresh()})).catch((t=>{console.error("Error adding document: ",t)}))}displayTodo(){let t=document.getElementById("container");t.innerHTML="",this.todoArray.forEach((e=>{t.innerHTML+=this.TempleteTodo(e)}))}TempleteTodo(t){if("todo"===t.type&&(Date.now()-t.timeStamp<864e5||!t.done)){let e=t.done?"bi-check-square-fill":"bi-square",i=t.done?"btn":"btn delete",n=t.done?"text-decoration-line-through text-black-50":"";return`<div id=${t.id} class="shadow-lg bg-white p-2 d-flex gap-2 align-items-center">\n                <button class="${i}"><i class="bi ${e} onpageI"></i></button>\n                <h6 class="${n}">${t.text}</h6>\n            </div>`}if("link"===t.type&&Date.now()-t.timeStamp<216e5)return`<div class="shadow-lg bg-white p-3">\n                <div class="d-flex align-items-center justify-content-between">\n                    <code>${e=t.text,e.replace(/(https?:\/\/[^\s]+)/g,(function(t){return'<a href="'+t+'"class="d-flex gap-1 align-items-center"><i class="bi bi-link-45deg"></i> '+t+"</a>"}))}</code>\n                    <button class="btn" onclick="navigator.clipboard.writeText('${t.text}')"><i class="bi bi-clipboard onpageI"></i></button>\n                </div>\n            </div>`;if("note"===t.type&&Date.now()-t.timeStamp<2628e6){let e=t.text.split("<br>"),i=e.shift(),n=e.join("");return`<div class="shadow-lg bg-white p-3">\n                <div class="d-flex align-items-center justify-content-between">\n                    <h6>${i}</h6>\n                    <button class="btn" onclick="navigator.clipboard.writeText('${t.text}')"><i class="bi bi-clipboard onpageI"></i></button>\n                </div>\n                <code>${n}</code>\n            </div>`}return"img"===t.type?`<div class="bg-white shadow-lg img-doc d-flex flex-column flex-md-row my-2">\n                        <img src="https://picsum.photos/200/" alt="" srcset="" class="flex-grow-1">\n                        <div class="p-3 w-100 d-flex align-items-start justify-content-between">\n                            <code class="flex-grow-1">\n                                Lorem ipsum dolor sit amet consectetur adipisicing elit. Blanditiis alias laboriosam cum odit perspiciatis ad atque eum! Itaque consectetur et ex aliquam impedit adipisci? Inventore voluptates alias itaque quam aut labore sunt facere fugit? Labore nihil a eaque pariatur debitis, aspernatur ex ratione cumque earum officia fugit hic, accusantium magnam!\n                            </code>\n                            <div class="h-100 float-end w-auto d-flex flex-column justify-content-center justify-content-md-start">\n                                <a class="btn" download="https://picsum.photos/200/">\n                                    <i class="bi bi-download onpageI"></i></a>\n                                <button class="btn" onclick="navigator.clipboard.writeText('${t.text}')">\n                                    <i class="bi bi-clipboard onpageI"></i></button>\n                            </div>\n                        </div>\n                    </div>`:"";var e}static copytext(t){navigator.clipboard.writeText(t)}deleteTodo(t){let e=(0,n.JU)(this.DB,this.userCollection,t);(0,n.r7)(e,{done:!0}).then((()=>{this.refresh()})).catch((t=>{console.error("Error updating document: ",t)}))}}}}]);